(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{57039:function(e,r,a){Promise.resolve().then(a.bind(a,92459))},92459:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return LoginPage}});var t=a(57437),n=a(2265);let o={email:"Ingrese un correo v\xe1lido ",password:"La contrase\xf1a es obligatoria"};var s=a(35691);let i=(0,s.Ry)({email:(0,s.Z_)().required(o.email),password:(0,s.Z_)().required(o.password)});var l=a(96507),d=a(43226),c=a(20879),g=a(49050),u=a(90500),p=a(39350);function BackdropLogin(e){let{handleClose:r,open:a}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(p.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:a,onClick:r})})}var h=a(22079),m=a(91797),x=a(26337),f=a(64173),v=a(42834);function AlertDialogLogin(e){let{handleClose:r,text:a,openDialog:n}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(h.Z,{open:n,onClose:r,children:[(0,t.jsx)(m.Z,{id:"alert-dialog-title",children:"Iniciar Sesi\xf3n"}),(0,t.jsx)(x.Z,{children:(0,t.jsx)(f.Z,{id:"alert-dialog-description",children:a})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)(g.Z,{onClick:r,children:"Ok"})})]})})}var C=a(31601),j=a(24033);function LoginPage(){let e={email:!1,emailMessage:"",password:!1,passwordMessage:""},r=(0,j.useRouter)(),[a,o]=(0,n.useState)({email:"",password:""}),[s,p]=(0,n.useState)(e),[h,m]=(0,n.useState)(!1),[x,f]=(0,n.useState)(),[v,k]=(0,n.useState)(!1),handleCloseBackdrop=()=>{k(!1)},handleChange=e=>{validateField(e),o({...a,[e.target.name]:e.target.value})},validateField=e=>{let r={...a,[e.target.name]:e.target.value};i.validateAt(e.target.name,r).then(()=>{p({...s,[e.target.name]:!1,[e.target.name+"Message"]:""})}).catch(r=>{p({...s,[e.target.name]:!0,[e.target.name+"Message"]:r.message})})},validateAll=()=>{try{i.validateSync(a,{abortEarly:!1}),k(!0),sendData()}catch(a){let r={...e};a.inner.forEach(e=>{r[e.path]=!0,r[e.path+"Message"]=e.message}),p(r)}},sendData=()=>{u.Z.post(C.b.login,a).then(e=>{handleCloseBackdrop(),console.log(e);let{token:a}=e.data;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(e.data)),r.push("/reportes/usuariosRegistrados")}).catch(e=>{f("Credenciales incorrectas"),m(!0)}),handleCloseBackdrop()};return(0,t.jsxs)(l.Z,{component:"form",onSubmit:e=>{e.preventDefault(),validateAll()},sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",backgroundColor:"white",minHeight:"100vh",paddingTop:"10%",minWidth:"100vw"},children:[(0,t.jsx)(d.Z,{variant:"h3",sx:{color:"black",marginBottom:"2rem"},children:"Inicio de Sesi\xf3n"}),(0,t.jsx)(c.Z,{id:"loginEmail",name:"email",label:"Email",variant:"outlined",margin:"normal",helperText:s.emailMessage,type:"email",onChange:handleChange,error:s.email,value:a.email}),(0,t.jsx)(c.Z,{id:"loginPassword",name:"password",label:"Contrase\xf1a",variant:"outlined",margin:"normal",type:"password",helperText:s.passwordMessage,error:s.password,onChange:handleChange,value:a.password}),(0,t.jsxs)(d.Z,{variant:"body1",sx:{color:"#E4D8D8",margin:"1rem"},children:["\xbfNo tienes una cuenta?",(0,t.jsx)(g.Z,{onClick:()=>{r.push("/register")},variant:"text",sx:{"&:hover":{backgroundColor:"white"}},children:"Click aqu\xed"})]}),(0,t.jsx)(AlertDialogLogin,{handleClose:()=>{m(!1),f("")},openDialog:h,text:x}),(0,t.jsx)(BackdropLogin,{handleClose:handleCloseBackdrop,open:v}),(0,t.jsx)(g.Z,{variant:"contained",type:"submit",sx:{backgroundColor:"#6788C3"},children:"Ingresar"})]})}},90500:function(e,r,a){"use strict";var t=a(92173);let n=t.Z.create({baseURL:"http://localhost:8000/api"});n.interceptors.request.use(e=>{let r=localStorage.getItem("token");return r&&e.headers&&(e.headers.Authorization=r?"Bearer ".concat(r):""),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>Promise.reject(e)),r.Z=n},31601:function(e,r,a){"use strict";a.d(r,{b:function(){return t}});let t={hello:"/hello",user:"/user",profile:"/profile",logout:"/logout",profile:"/profile",reports:"/reportes",clientReportData:"/reporting/user/",userReportData:"/reporting/user-register/",userDelete:"/reporting/user/",inventaryReport:"/reportes/inventarios",inventaryReportData:"/reporting/inventary/",saleReportData:"/reporting/sale/",login:"/login",logout:"/logout",addFAQ:"/agregar-pregunta",editFAQ:"/editar-pregunta/",deleteFAQ:"/",FAQS:"/faqs",ordersYear:"reporting/ordersYears",economicReport:"reporting/economicReport"}}},function(e){e.O(0,[226,886,429,997,173,711,479,25,971,472,744],function(){return e(e.s=57039)}),_N_E=e.O()}]);